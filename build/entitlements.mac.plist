<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <!-- Required for Electron apps with hardened runtime -->
    <key>com.apple.security.cs.allow-jit</key>
    <true/>
    <key>com.apple.security.cs.allow-unsigned-executable-memory</key>
    <true/>
    <key>com.apple.security.cs.allow-dyld-environment-variables</key>
    <true/>

    <!-- Required for screen capture (desktopCapturer) -->
    <key>com.apple.security.device.camera</key>
    <true/>
    <key>com.apple.security.device.audio-input</key>
    <true/>

    <!-- Network access for AI API calls -->
    <key>com.apple.security.network.client</key>
    <true/>

    <!--
      Native modules (better-sqlite3, sqlite-vec) are compiled C++ addons (.node files)
      that cannot be individually code-signed when bundled with Electron via electron-builder.
      Without disabling library validation, macOS Gatekeeper blocks loading these unsigned
      shared libraries in hardened runtime. This is a standard requirement for Electron apps
      using native Node modules (see: electron-builder docs, electron/electron#31961).
      Risk: Allows loading unsigned dynamic libraries into the process.
      Mitigation: App is code-signed + notarized; native modules are from trusted npm packages.
    -->
    <key>com.apple.security.cs.disable-library-validation</key>
    <true/>

    <!--
      Required for desktop automation via osascript + System Events.
      AutomationService uses AppleScript/JXA to control mouse, keyboard, and read window state.
      macOS requires this entitlement AND user-granted Accessibility permission (prompted on first use).
      Risk: Allows sending Apple Events to other applications.
      Mitigation: User must explicitly grant Accessibility permission; safety lock requires manual unlock.
    -->
    <key>com.apple.security.automation.apple-events</key>
    <true/>

    <!-- File access for RAG, file intelligence -->
    <key>com.apple.security.files.user-selected.read-write</key>
    <true/>
</dict>
</plist>
